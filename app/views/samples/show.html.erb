<script type="text/javascript">
  soundManager.setup({
  url: '/swf',
  onready: function() {
    var <%= @sample.name %> = soundManager.createSound({
      id: '<%= @sample.name %>id',
      url: '<%= @sample.specimen_url %>',

      ontimeout: function() {
        // Hrmm, SM2 could not start. Missing SWF? Flash blocked? Show an error, etc.?
        console.log('Soundmanager was unable to start! Fuck!');
      },

      whileplaying: function() {
        $(".timeline").css('width', ((<%= @sample.name %>.position/<%= @sample.name %>.duration) * 100) + '%');
      },

      onstop: function() {
        $(".timeline").css('width', '0%');
      }

    });

      $("#<%= @sample.name %>playbutton").click(function()
        {
          <%= @sample.name %>.play();
        });

      $("#<%= @sample.name %>stopbutton").click(function()
        {
          <%= @sample.name %>.stop();
        });


      $(".timelinecontainer").click(function(e){
        //set song position to % position within timelinediv
          <%= @sample.name %>.setPosition((e.pageX/$(window).width()) * <%= @sample.name %>.duration);
      });
    },
  });
</script>


<h1><%= @sample.name %></h1>
<a href="<%= @sample.specimen_url %>">Download Stem</a>
<br>
<%= @sample.specimen_url %>
<br>
<div class="playcontrols">
  <button id="<%= @sample.name %>playbutton"><img src="/img/play.png" alt="Play"></button>
  <button id="<%= @sample.name %>stopbutton"><img src="/img/stop.png" alt="Stop"></button>
</div>

<div class="timelinecontainer">
  <div class="timeline"></div>
</div>

<br>
<%= link_to "Go Back", samples_path %>

